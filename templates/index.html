<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Object Detection using YOLOv3</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.7/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-200 flex items-center justify-center h-screen">
    <div class="bg-white p-8 rounded shadow-md w-80">
        <h2 class="text-2xl mb-6 text-center">Upload Image</h2>
        <form action="/predict" method="post" enctype="multipart/form-data" class="space-y-3">
            <div class="mb-3">
                <!-- <label for="image" class="form-label">Select Image</label> -->
                <input type="file" name="image" accept="image/*" class="form-control" id="image">
                <p id="error-message" style="color: red; display: none;">Please select a file.</p>

                <script>
                    // CLIENT-SIDE VALIDATION
                    // Check if the file input is empty
                    document.querySelector('form').addEventListener('submit', function (event) {
                        var fileInput = document.getElementById('image');
                        var errorMessage = document.getElementById('error-message');
                        if (fileInput.files.length === 0) {
                            event.preventDefault(); // Prevent form submission
                            errorMessage.textContent = 'Please select a file.';
                            errorMessage.style.display = 'block'; // Show error message
                        } else {
                            // Check if the file type is valid
                            var file = fileInput.files[0];
                            var fileType = file.type;
                            var validImageTypes = ['image/jpeg', 'image/png', 'image/webp'];
                            if (!validImageTypes.includes(fileType)) {
                                event.preventDefault(); // Prevent form submission
                                errorMessage.textContent = 'Invalid file type. Please select a jpeg, jpg, png, or webp file.';
                                errorMessage.style.display = 'block'; // Show error message
                            } else {
                                errorMessage.style.display = 'none'; // Hide error message
                            }
                        }
                    });
                </script>
            </div>
            <button type="submit" class="btn btn-primary w-full">Submit</button>
        </form>
    </div>
</body>

</html>